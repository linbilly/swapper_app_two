<ion-view class="shifts-patterns" view-title="Shift patterns" ng-init="fetchShiftPatterns()" cache-view="false">
  <ion-nav-buttons side="right" >
    <a class="button button-icon icon ion-android-more-vertical" ng-click="popover.show($event)"></a>
  </ion-nav-buttons>
  <div class="row loader-holder">
    <ion-spinner class="actual-loader spinner-positive" icon="lines" ng-show="loader"></ion-spinner>
  </div>
  <ion-content>
    <ion-tabs class="tabs-striped tabs-top tabs-calm">
      <ion-tab href="#/tab/shifts" title="View" icon-on="ion-ios-filing" icon-off="ion-ios-filing-outline">
        <ion-nav-view name="tab-shifts"></ion-nav-view>
      </ion-tab>
      <ion-tab href="#/tab/shifts/input" title="Input" icon-on="ion-ios-filing" icon-off="ion-ios-filing-outline">
        <ion-nav-view name="shifts-input"></ion-nav-view>
      </ion-tab>
      <ion-tab href="#/tab/shifts/patterns" title="Patterns" icon-on="ion-ios-filing" icon-off="ion-ios-filing-outline">
        <ion-nav-view name="shifts-patterns"></ion-nav-view>
      </ion-tab>
    </ion-tabs>
    <notification ng-model="message" ng-show="message"></notification>
    <div class="list">
      <ion-list ng-repeat="group in groupsWithShiftTypes">
        <div class="item item-divider shift-pattern-group">
          <div class="shift-pattern-group-name">
            {{group.name}}
          </div>
          <a class="add-pattern positive" href="#/tab/shifts/patterns/{{group.id}}/new">
            <i class="icon ion-android-add-circle"></i>
            Add pattern
          </a>
        </div>
        <ion-item ng-repeat="shiftType in group.shift_types" type="item-text-wrap" class="item item-icon-right" href="#/tab/shifts/patterns/{{shiftType.id}}">
          {{shiftType.abbreviation}}: {{shiftType.name}}
          <span class="item-note">
            {{shiftType.start_hour | numberFixedLen: 2}}:{{shiftType.start_minute | numberFixedLen: 2}} - {{prettyEndTime(shiftType)}}
          </span>
          <i class="icon ion-chevron-right icon-accessory"></i>
        </ion-item>
      </ion-list>
    </div>
  </ion-content>
</ion-view>